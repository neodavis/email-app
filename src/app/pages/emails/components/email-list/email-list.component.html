<p-tree [value]="nodes" styleClass="w-full">
  <ng-template let-node pTemplate="folder">
    <p-button
      class="block mb-1 w-full"
      styleClass="w-full"
      [severity]="
        node.label === selectedFolder?.folder && node.emailAddress === selectedFolder?.emailAddress
        ? 'primary'
        : 'secondary'
      "
      (click)="onFolderSelect.emit({ emailAddress: node.emailAddress, folder: node.label })"
    >
      <div class="flex w-full justify-start">
        {{ node.label }}
      </div>
    </p-button>
  </ng-template>
  <ng-template let-node pTemplate="newFolder">
    <div class="flex w-full gap-2">
      <input
        pInputText
        id="emailAddress"
        class="w-full h-full"
        placeholder="Enter new folder name"
        [(ngModel)]="newFolderName"
      />
      <p-button
        styleClass=" h-full"
        icon="pi pi-save"
        [loading]="newFolderLoading"
        [severity]="'primary'"
        [disabled]="!newFolderName"
        (click)="onNewFolder.emit({ emailAddress: node.emailAddress, folder: newFolderName })"
      ></p-button>
    </div>
  </ng-template>
  <ng-template let-node pTemplate="newFolder">
    <div class="flex w-full gap-2 mb-1">
      <input
        pInputText
        id="emailAddress"
        class="w-full h-full"
        placeholder="Enter new folder name"
        [(ngModel)]="newFolderName"
      />
      <p-button
        styleClass=" h-full"
        icon="pi pi-save"
        [loading]="newFolderLoading"
        [severity]="'primary'"
        [disabled]="!newFolderName"
        (click)="onNewFolder.emit({ emailAddress: node.emailAddress, folder: newFolderName })"
      ></p-button>
    </div>
  </ng-template>
</p-tree>

